<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="https://www.thymeleaf.org">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <title>Diário de Saúde</title>
       	<link rel="stylesheet" th:href="@{/assets/css/styles.css}" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
    </head>
    <body class="sb-nav-fixed">
	<div th:replace="fragments/navigation :: top-nav-bar"></div>
        <div id="layoutSidenav">
		<div th:replace="fragments/sidebar :: side-bar"></div>
            <div id="layoutSidenav_content">
              <div class="contentCenter d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
		    	<h1 class="h2">Perfil</h1>
		        <div class="btn-toolbar mb-2 mb-md-0">
		          <div class="btn-group me-2">
		            <button form="form_perfil" type="submit" class="btn btn-success">Salvar</button>
		          </div>
		        </div>
		      </div>
		      <div class="card">
		      <div class="card-header" style="height: 30px">
			  </div>
			  <div class="card-body">
			<form action="/perfil" method="POST" id="form_perfil" class="row g-3">
			  <div class="col-md-6">
			    <label for="inputNome" class="form-label">Nome</label>
			    <input name="nome" th:value="${session.usuarioLogado?.perfil.nome}" type="text" class="form-control" id="inputNome">
			  </div>
			  <div class="col-md-6">
			    <label for="inputSobrenome" class="form-label">Sobrenome</label>
			    <input name="sobrenome" th:value="${session.usuarioLogado?.perfil.sobrenome}" type="text" class="form-control" id="inputSobrenome">
			  </div>
			  <div class="col-6">
			    <label for="inputDataNascimento" class="form-label">Data de Nascimento</label>
			    <input th:value="${#dates.format(session.usuarioLogado?.perfil.dtaNascimento, 'dd/MM/yyyy')}" name="dtaNascimento" type="text" data-mask="00/00/0000" class="form-control" id="inputDataNascimento" placeholder="dd/MM/aaaa">
			  </div>
			  <div class="col-6">
			    <label for="inputTelefone" class="form-label">Telefone</label>
			    <input th:value="${session.usuarioLogado?.perfil.telefone}" name="telefone" type="text" data-mask="(00) 00000-0000" class="form-control" id="inputAddress" placeholder="(xx)xxxxx-xxxx">
			  </div>
			  <div class="col-4">
			    <label for="inputTipoSanguineo" class="form-label">Tipo Sanguineo</label>
			    <select name="tipoSanguineo" th:value="${session.usuarioLogado?.perfil.tipoSanguineo}" id="inputTipoSanguineo" class="form-select">
			      <option>A+</option>
			      <option>A-</option>
			      <option>B+</option>
			      <option>B-</option>
			      <option>AB+</option>
			      <option>AB-</option>
			      <option>O+</option>
			      <option>O-</option>
			    </select>
			  </div>
			  <div class="col-md-4">
			    <label for="inputSexo" class="form-label">Sexo</label>
			    <select name="sexo" th:value="*{session.usuarioLogado?.perfil.sexo}" id="inputSexo" class="form-select">
			      <option th:value="Masculino">Masculino</option>
			      <option th:value="Feminino">Feminino</option>
			      <option th:value="Outros">Outros</option>
			    </select>
			  </div>
			  <div class="col-md-4">
			    <label for="inputAltura" class="form-label">Altura</label>
			    <input th:value="${session.usuarioLogado?.perfil.altura}" name="altura" data-mask="0.00" type="text" class="form-control" id="inputAltura">
			  </div>
			  <div class="col-12">
			    <button type="submit" class="btn btn-primary my-2">Salvar</button>
			  </div>
			</form>
			</div>
			</div>
			<div th:replace="fragments/footer :: footer"></div>
            </div>
			</div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="/assets/js/datatables-simple-demo.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest"></script>
        <script src="/assets/js/scripts.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.11/jquery.mask.min.js"></script>
		<input th:value="${session.usuarioLogado?.perfil.tipoSanguineo}" id="tipoSanguineoLeitura"/>
		<input th:value="${session.usuarioLogado?.perfil.sexo}" id="sexoLeitura"/>
		<script>
			let tipoSanguineo = document.getElementById("tipoSanguineoLeitura").value;
			let campoSelect = document.getElementById("inputTipoSanguineo");
			for(let i = 0; i < campoSelect.options.length; i++){
				if(campoSelect.options[i].value == tipoSanguineo){
					campoSelect.options[i].selected = true;
				}
			}
			let sexo = document.getElementById("sexoLeitura").value;
			let sexoSelect = document.getElementById("inputSexo");
			for(let i = 0; i < sexoSelect.options.length; i++){
				if(sexoSelect.options[i].value == sexo){
					sexoSelect.options[i].selected = true;
				}
			}
		</script>
    </body>
</html>
